<div [class]="'min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-50 via-white to-cyan-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 px-4 sm:px-6 lg:px-8 transition-all duration-500 ' + (LanguageService.currentLanguage() === 'ar' ? 'rtl' : 'ltr')">
  <!-- Background Animation -->
  <div class="absolute inset-0 overflow-hidden">
    <div class="absolute -top-40 -right-40 w-80 h-80 bg-indigo-300 dark:bg-indigo-900 rounded-full mix-blend-multiply dark:mix-blend-normal filter blur-xl opacity-70 animate-blob"></div>
    <div class="absolute -bottom-40 -left-40 w-80 h-80 bg-cyan-300 dark:bg-cyan-900 rounded-full mix-blend-multiply dark:mix-blend-normal filter blur-xl opacity-70 animate-blob animation-delay-2000"></div>
    <div class="absolute top-40 left-40 w-80 h-80 bg-teal-300 dark:bg-teal-900 rounded-full mix-blend-multiply dark:mix-blend-normal filter blur-xl opacity-70 animate-blob animation-delay-4000"></div>
  </div>

  <!-- Forgot Password Card -->
  <div class="relative w-full max-w-md">
    <div class="bg-white dark:bg-gray-800 shadow-2xl rounded-2xl p-8 backdrop-blur-sm bg-opacity-90 dark:bg-opacity-90 border border-gray-200 dark:border-gray-700 animate-slide-up">
      <!-- Header Controls -->
      <div class="flex justify-between items-center mb-8">
        <!-- Back Button -->
        <button
          routerLink="/login"
          class="p-2 rounded-lg text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200"
        >
          <i class="fas fa-arrow-left w-5 h-5"></i>
        </button>

        <div class="flex space-x-2">
          <!-- Language Toggle -->
          <button
            (click)="toggleLanguage()"
            class="p-2 rounded-lg text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200"
          >
            <i class="fas fa-globe w-5 h-5 mr-1"></i>
            <span class="text-sm font-medium">{{ LanguageService.currentLanguage().toUpperCase() }}</span>
          </button>

          <!-- Theme Toggle -->
          <button
            (click)="toggleTheme()"
            class="p-2 rounded-lg text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200"
          >
            <i [class]="ThemeService.isDark() ? 'fas fa-sun' : 'fas fa-moon' + ' w-5 h-5'"></i>
          </button>
        </div>
      </div>

      <!-- Success State -->
      <div *ngIf="emailSent" class="text-center animate-fade-in">
        <div class="w-16 h-16 bg-green-100 dark:bg-green-900/50 rounded-full flex items-center justify-center mx-auto mb-6 animate-bounce-slow">
          <i class="fas fa-check-circle w-8 h-8 text-green-600 dark:text-green-400"></i>
        </div>
        <h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">
          {{ labels.emailSent }}
        </h1>
        <p class="text-gray-600 dark:text-gray-400 mb-6">
          {{ labels.checkEmail }}
        </p>
        <p class="text-sm text-gray-500 dark:text-gray-400 mb-8">
          {{ labels.didntReceive }}
          <button
            (click)="resendEmail()"
            [disabled]="resendCooldown > 0"
            class="text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300 font-medium ml-1 disabled:opacity-50"
          >
            {{ resendCooldown > 0 ? labels.resendIn.replace('{seconds}', resendCooldown.toString()) : labels.resend }}
          </button>
        </p>
        <app-form-button
          [text]="labels.backToLogin"
          variant="outline"
          [fullWidth]="true"
          icon="fas fa-arrow-left"
          (buttonClick)="goToLogin()"
        ></app-form-button>
      </div>

      <!-- Form State -->
      <div *ngIf="!emailSent" class="animate-fade-in">
        <!-- Logo and Title -->
        <div class="text-center mb-8">
          <div class="w-16 h-16 bg-gradient-to-br from-indigo-600 to-cyan-600 rounded-2xl flex items-center justify-center mx-auto mb-4 animate-pulse-slow">
            <i class="fas fa-envelope w-8 h-8 text-white"></i>
          </div>
          <h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">
            {{ labels.forgotPassword }}
          </h1>
          <p class="text-gray-600 dark:text-gray-400">
            {{ labels.subtitle }}
          </p>
        </div>

        <!-- Forgot Password Form -->
        <form (ngSubmit)="onSubmit()" class="space-y-6">
          <!-- Email Input -->
          <div class="animate-slide-in-up" style="animation-delay: 0.1s">
            <app-form-input
              [label]="labels.email"
              [placeholder]="labels.emailPlaceholder"
              type="email"
              icon="fas fa-envelope"
              [required]="true"
              [error]="emailError"
              autocomplete="email"
              [(ngModel)]="email"
              name="email"
            ></app-form-input>
          </div>

          <!-- Submit Button -->
          <div class="animate-slide-in-up" style="animation-delay: 0.2s">
            <app-form-button
              [text]="labels.sendResetLink"
              type="submit"
              variant="primary"
              [fullWidth]="true"
              [loading]="isLoading"
              icon="fas fa-paper-plane"
            ></app-form-button>
          </div>
        </form>

        <!-- Back to Login -->
        <div class="mt-8 text-center animate-slide-in-up" style="animation-delay: 0.3s">
          <p class="text-sm text-gray-600 dark:text-gray-400">
            {{ labels.rememberPassword }}
            <a
              routerLink="/login"
              class="font-medium text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300 transition-colors duration-200 ml-1"
            >
              {{ labels.backToLogin }}
            </a>
          </p>
        </div>
      </div>
    </div>
  </div>
</div>