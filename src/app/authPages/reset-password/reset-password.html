<div
  class="min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center px-4"
>
  <div class="max-w-md w-full space-y-8 animate-slide-in-up">
    <!-- Header -->
    <div class="text-center">
      <h2 class="text-3xl font-bold text-gray-900 dark:text-white">
        {{ labels.resetPassword }}
      </h2>
      <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">
        {{ labels.subtitle }}
      </p>
    </div>

    <!-- Success State -->
    <div *ngIf="passwordReset" class="text-center space-y-4">
      <div class="text-green-600 dark:text-green-400">
        <svg
          class="mx-auto h-16 w-16"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M5 13l4 4L19 7"
          ></path>
        </svg>
      </div>
      <p class="success-message text-center">{{ successMessage }}</p>
      <app-form-button
        [text]="labels.goToLogin"
        variant="outline"
        [fullWidth]="true"
        (buttonClick)="goToLogin()"
        [loading]="false"
      >
      </app-form-button>
    </div>

    <!-- Reset Form -->
    <form *ngIf="!passwordReset" (ngSubmit)="onSubmit()" class="mt-8 space-y-6">
      <!-- Password -->
      <div class="animate-slide-in-up" style="animation-delay: 1.4s">
        <app-form-input
          [label]="labels.newPassword"
          [placeholder]="labels.newPassword"
          type="password"
          icon="fa-solid fa-lock"
          [required]="true"
          [error]="passwordError"
          autocomplete="new-password"
          [(ngModel)]="newPassword"
          name="password"
          (ngModelChange)="validateField('newPassword')"
          (blur)="validateField('newPassword', true)"
        ></app-form-input>

        <div
          *ngIf="newPassword"
          class="mt-2 text-xs text-gray-500 dark:text-gray-400"
        >
          <div class="font-medium mb-1">{{ labels.passwordRequirements }}</div>
          <ul class="list-disc list-inside space-y-1">
            <li [class.text-green-500]="hasMinLength">
              {{ hasMinLength ? "✓" : "•" }} {{ labels.passwordMinLength }}
            </li>
            <li [class.text-green-500]="hasLowercase">
              {{ hasLowercase ? "✓" : "•" }} {{ labels.passwordLowercase }}
            </li>
            <li [class.text-green-500]="hasUppercase">
              {{ hasUppercase ? "✓" : "•" }} {{ labels.passwordUppercase }}
            </li>
            <li [class.text-green-500]="hasNumber">
              {{ hasNumber ? "✓" : "•" }} {{ labels.passwordNumber }}
            </li>
            <li [class.text-green-500]="hasSpecialChar">
              {{ hasSpecialChar ? "✓" : "•" }} {{ labels.passwordSpecialChar }}
            </li>
          </ul>
        </div>
      </div>

      <!-- Confirm Password -->
      <div class="animate-slide-in-up mb-6" style="animation-delay: 1.5s;margin-bottom: 2rem;">
        <app-form-input
          [label]="labels.confirmPassword"
          [placeholder]="labels.confirmPassword"
          type="password"
          icon="fa-solid fa-lock"
          [required]="true"
          [error]="confirmPasswordError"
          autocomplete="new-password"
          [(ngModel)]="confirmPassword"
          name="confirmPassword"
          (ngModelChange)="validateField('confirmPassword')"
          (blur)="validateField('confirmPassword', true)"
        ></app-form-input>
        <div
          *ngIf="
            newPassword && confirmPassword && newPassword !== confirmPassword
          "
          class="mt-1 mb-4 text-xs text-red-500"
        >
          {{ labels.passwordsNotMatch }}
        </div>
      </div>

      <!-- API Error Message -->
      <div *ngIf="apiError" class="error-message text-center">
        {{ apiError }}
      </div>

      <!-- Submit Button -->
      <app-form-button
        [text]="labels.resetPasswordButton"
        type="submit"
        variant="primary"
        [fullWidth]="true"
        icon="fa-solid fa-check"
        [disabled]="isLoading"
      >
      </app-form-button>
    </form>

    <!-- Theme and Language Toggle -->
    <div class="flex justify-center space-x-4 mt-6">
      <button
        (click)="toggleTheme()"
        class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"
      >
        <svg
          class="h-5 w-5"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
          ></path>
        </svg>
      </button>
      <button
        (click)="toggleLanguage()"
        class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"
      >
        {{ LanguageService.currentLanguage() === "ar" ? "EN" : "ع" }}
      </button>
    </div>
  </div>
</div>
